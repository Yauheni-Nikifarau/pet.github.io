(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{14:function(t,e,a){},15:function(t,e,a){},18:function(t,e,a){"use strict";a.r(e);var n=a(3),r=a.n(n),i=a(9),c=a.n(i),s=(a(14),a(6)),o=(a(15),a(1)),u=a(5),d=a(2),l=a.n(d),p=a(4),b=a.p+"static/media/delete_basket.1edb1a32.svg",m=a.p+"static/media/people.0c1eddfc.svg",j=a(0),f=function(t){var e=Object(n.useState)(!1),a=Object(s.a)(e,2),r=a[0],i=a[1],c=function(){i(!1)};return Object(j.jsxs)("div",{className:"box "+t.title.toLowerCase(),children:[t.fields?Object(j.jsxs)("div",{className:"box_add-modal"+(r?" open":""),children:[t.fields.map((function(t,e){return"select"===t.type?Object(j.jsx)("select",{name:t.name,children:t.options?t.options.map((function(t,e){return Object(j.jsx)("option",{value:t.value,children:t.text},e)})):""},e):Object(j.jsx)("input",{type:t.type,name:t.name,placeholder:t.placeholder},e)})),Object(j.jsx)("button",{onClick:function(e){var a,n={},r=e.target.parentNode.querySelectorAll("input"),i=Object(u.a)(r);try{for(i.s();!(a=i.n()).done;){var s=a.value;n[s.name]=s.value,s.value=""}}catch(b){i.e(b)}finally{i.f()}var o,d=e.target.parentNode.querySelectorAll("select"),l=Object(u.a)(d);try{for(l.s();!(o=l.n()).done;){var p=o.value;n[p.name]=p.selectedOptions[0].value}}catch(b){l.e(b)}finally{l.f()}t.okClickHandler&&n&&t.okClickHandler(n),c()},children:"OK"})]}):"",Object(j.jsxs)("div",{className:"box-header",children:[Object(j.jsx)("h2",{children:t.title}),t.buttonShouldBe?Object(j.jsx)("button",{onClick:function(){i(!0)},children:"+Add"}):""]}),t.buttonShouldBe?Object(j.jsx)("div",{className:"shadow-bg"+(r?" open":""),onClick:c}):"",t.children]})},h=r.a.createContext({}),x=function(){var t,e=Object(n.useContext)(h),a=function(){var t=Object(p.a)(l.a.mark((function t(a){var n,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.library.data.items.length?e.library.data.items.reduce((function(t,e){return e.id>t.id?e:t})).id:0,r=e.library,i=e.library.data.participants.map((function(t){return t.id})),r.data.items.push({id:n+1,name:a.title,sum:+(+a.sum).toFixed(2),participantsId:i}),t.next=6,e.updateLibrary(Object(o.a)({},r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var t=Object(p.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.library).data.items=e.library.data.items.filter((function(t){return t.id!==a})),t.next=4,e.updateLibrary(Object(o.a)({},n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(p.a)(l.a.mark((function t(a,n){var r,i,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.library,(i=r.data.items.find((function(t){return t.id===a})))&&(c=r.data.items.indexOf(i),i.participantsId.includes(n)?(s=i.participantsId.indexOf(n),r.data.items[c].participantsId.splice(s,1)):r.data.items[c].participantsId.push(n)),t.next=5,e.updateLibrary(Object(o.a)({},r));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),c=[],s=Object(u.a)(e.library.data.participants);try{for(s.s();!(t=s.n()).done;){var d=t.value;c[d.id]=d.name}}catch(O){s.e(O)}finally{s.f()}var x=e.library.data.items.length?e.library.data.items.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{sum:+e.sum+ +t.sum})})).sum.toFixed(2):0;return Object(j.jsxs)(f,{title:"Items",buttonShouldBe:!0,fields:[{type:"text",name:"title",placeholder:"Item Title"},{type:"number",name:"sum",placeholder:"Enter Sum"}],okClickHandler:a,children:[e.library.data.items.map((function(t){return Object(j.jsxs)("div",{className:"box_item-box",children:[Object(j.jsxs)("p",{children:[t.name," ---- ",t.sum]}),Object(j.jsx)("img",{src:m,alt:"people button",className:"item-box_button item-box_button_people"}),Object(j.jsx)("ul",{className:"item-box_participants-list",children:c.map((function(e,a){return Object(j.jsx)("li",{children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",checked:t.participantsId.includes(a),onChange:function(){return i(t.id,a)}}),Object(j.jsx)("span",{children:e})]})},a)}))}),Object(j.jsx)("img",{src:b,onClick:function(){return r(t.id)},alt:"delete button",className:"item-box_button item-box_button_delete"})]},t.id)})),Object(j.jsxs)("p",{children:["Total: ",x]})]})},O=function(){var t=Object(n.useContext)(h),e=function(){var e=Object(p.a)(l.a.mark((function e(a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.library).data.participants=t.library.data.participants.filter((function(t){return t.id!==a})),n.data.spending=t.library.data.spending.filter((function(t){return t.participantId!==a})),e.next=5,t.updateLibrary(Object(o.a)({},n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(p.a)(l.a.mark((function e(a){var n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.library.data.participants.length?t.library.data.participants.reduce((function(t,e){return e.id>t.id?e:t})).id:0,r=t.library,i={id:n+1,name:a.name},r.data.participants.push(i),e.next=6,t.updateLibrary(Object(o.a)({},r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(f,{title:"Participants",buttonShouldBe:!0,fields:[{type:"text",name:"name",placeholder:"Enter participant name"}],okClickHandler:a,children:[t.library.data.participants.map((function(t){return Object(j.jsxs)("div",{className:"box_item-box",children:[Object(j.jsx)("p",{children:t.name}),Object(j.jsx)("img",{onClick:function(){return e(t.id)},src:b,alt:"delete button",className:"item-box_button item-box_button_delete"})]},t.id)})),Object(j.jsxs)("p",{children:["Total: ",t.library.data.participants.length]})]})},v=function(t){var e,a=Object(n.useContext)(h),r=function(){var e=Object(p.a)(l.a.mark((function e(n){var r,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.library,(i=r.results.find((function(t){return t.id===n})))&&(c=r.results.indexOf(i),r.results[c].approved=!r.results[c].approved),e.next=5,a.updateLibrary(Object(o.a)({},r));case 5:t.showResults();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=[],c=Object(u.a)(a.library.results);try{var s=function(){var t=e.value,n=a.library.data.participants.find((function(e){return e.id===t.fromId})),r=n?n.name:"Unknown",c=(n=a.library.data.participants.find((function(e){return e.id===t.toId})))?n.name:"Unknown";i.push({id:t.id,from:r,to:c,sum:t.sum,approved:t.approved})};for(c.s();!(e=c.n()).done;)s()}catch(d){c.e(d)}finally{c.f()}return Object(j.jsx)(f,{title:"Results",buttonShouldBe:!1,children:i.map((function(t,e){return Object(j.jsxs)("div",{className:t.approved?"box_item-box box_item-box_approved":"box_item-box",children:[Object(j.jsxs)("p",{children:["From ",t.from," to ",t.to," - ",t.sum]}),Object(j.jsx)("button",{onClick:function(){return r(t.id)},className:"item-box_button item-box_button_approve"})]},e)}))})},y=function(){var t=Object(n.useContext)(h),e=[{type:"select",name:"participant",options:t.library.data.participants.map((function(t){return{value:t.id,text:t.name}}))},{type:"number",name:"sum",placeholder:"Enter Sum"}],a=function(){var e=Object(p.a)(l.a.mark((function e(a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.library.data.spending.length?t.library.data.spending.reduce((function(t,e){return e.id>t.id?e:t})).id:0,(r=t.library).data.spending.push({id:n+1,participantId:+a.participant,amount:+(+a.sum).toFixed(2)}),e.next=5,t.updateLibrary(Object(o.a)({},r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(p.a)(l.a.mark((function e(a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.library).data.spending=t.library.data.spending.filter((function(t){return t.id!==a})),e.next=4,t.updateLibrary(Object(o.a)({},n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=t.library.data.spending.map((function(e){var a=t.library.data.participants.find((function(t){return t.id===e.participantId})),n=a&&a.name?a.name:"Unknown";return{id:e.id,participantName:n,amount:e.amount}})),c=t.library.data.spending.length?t.library.data.spending.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{amount:+e.amount+ +t.amount})})).amount.toFixed(2):0;return Object(j.jsxs)(f,{title:"Spending",buttonShouldBe:!0,fields:e,okClickHandler:a,children:[i.map((function(t){return Object(j.jsxs)("div",{className:"box_item-box",children:[Object(j.jsxs)("p",{children:[t.participantName,": ",t.amount]}),Object(j.jsx)("img",{onClick:function(){return r(t.id)},src:b,alt:"delete button",className:"item-box_button item-box_button_delete"})]},t.id)})),Object(j.jsxs)("p",{children:["Total: ",c]})]})},g=function(){var t=Object(n.useState)(JSON.parse(localStorage.getItem("library")||"")),e=Object(s.a)(t,2),a=e[0],r=e[1],i=Object(n.useState)(!1),c=Object(s.a)(i,2),d=c[0],b=c[1],m=function(){var t=Object(p.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(e),b(!1),t.next=4,localStorage.setItem("library",JSON.stringify(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(p.a)(l.a.mark((function t(){var e,n,r,i,c,s,d,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Object(u.a)(a.data.items),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=10;break}if((r=n.value).participantsId.length){t.next=8;break}return alert("You don't have participants sharing \"".concat(r.name,'" item')),t.abrupt("return");case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),e.e(t.t0);case 15:return t.prev=15,e.f(),t.finish(15);case 18:if(i=a.data.spending.length?a.data.spending.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{amount:+e.amount+ +t.amount})})).amount.toFixed(2):0,c=a.data.items.length?a.data.items.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{sum:+e.sum+ +t.sum})})).sum.toFixed(2):0,i===c){t.next=23;break}return alert("Spending and Items sums are not equal. Check it out."),t.abrupt("return");case 23:return s=[],d=[],a.data.participants.forEach((function(t){var e,n=0,r=Object(u.a)(a.data.spending);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.participantId===t.id&&(n+=i.amount)}}catch(m){r.e(m)}finally{r.f()}var c,o=0,l=Object(u.a)(a.data.items);try{for(l.s();!(c=l.n()).done;){var p=c.value;p.participantsId.length&&p.participantsId.includes(t.id)&&(o+=+(p.sum/p.participantsId.length).toFixed(2))}}catch(m){l.e(m)}finally{l.f()}var b=o>n;b?s.push({id:t.id,name:t.name,isDebtor:b,balance:o-n}):d.push({id:t.id,name:t.name,isDebtor:b,balance:n-o})})),(p=a).results=[],d.forEach((function(t,e){s.forEach((function(a,n){if(!(t.balance<=0||a.balance<=0)){var r=0;if(r=t.balance>=a.balance?a.balance:t.balance,d[e]=Object(o.a)(Object(o.a)({},t),{},{balance:t.balance-=r}),s[n]=Object(o.a)(Object(o.a)({},a),{},{balance:a.balance-=r}),r>0){var i=p.results.length?p.results.reduce((function(t,e){return e.id>t.id?e:t})).id:0;p.results.push({id:i+1,fromId:a.id,toId:t.id,sum:r.toFixed(2),approved:!1})}}}))})),t.next=31,m(Object(o.a)({},p));case 31:b(!0);case 32:case"end":return t.stop()}}),t,null,[[1,12,15,18]])})));return function(){return t.apply(this,arguments)}}();return Object(j.jsx)("div",{children:Object(j.jsxs)(h.Provider,{value:{updateLibrary:m,library:a},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)(O,{}),Object(j.jsx)(y,{}),Object(j.jsx)(x,{}),d?Object(j.jsx)(v,{showResults:function(){return b(!0)}}):null]}),Object(j.jsx)("button",{onClick:f,children:"Calculate"})]})})},k={owner:"",date:"",name:"",id:1,data:{participants:[],spending:[],items:[]},results:[{id:1,fromId:1,toId:2,sum:1200,approved:!1}]};var w=function(){var t=Object(n.useState)(!1),e=Object(s.a)(t,2),a=e[0];return e[1],localStorage.getItem("library")||(localStorage.setItem("library",JSON.stringify(k)),console.log("put")),Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)("header",{className:"app-header",children:Object(j.jsx)("h1",{className:"app-name",children:"BillShare"})}),Object(j.jsxs)("main",{className:"app-content"+(a?" menu_open":""),children:[Object(j.jsx)(g,{}),Object(j.jsxs)("div",{className:"app-instruction",children:[Object(j.jsx)("p",{children:"It is an App which will help you to have a cool party and share your costs between all participants without any delay. Please, act as follows:"}),Object(j.jsx)("p",{children:"1. Add all party participants to the Participants box"}),Object(j.jsx)("p",{children:"2. Add the information what applied costs has every participant to the Spending box"}),Object(j.jsx)("p",{children:"3. Add the information about all goods you have to the Items box. Also for each good choose participants who take part in consumption of that good."}),Object(j.jsx)("p",{children:"4. Click Calculate!"}),Object(j.jsx)("p",{})]})]})]})},I=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,19)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;a(t),n(t),r(t),i(t),c(t)}))};c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root")),I()}},[[18,1,2]]]);
//# sourceMappingURL=main.bc01ee0d.chunk.js.map