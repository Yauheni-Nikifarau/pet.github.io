(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{14:function(t,e,a){},15:function(t,e,a){},18:function(t,e,a){"use strict";a.r(e);var n=a(2),r=a.n(n),i=a(9),c=a.n(i),s=(a(14),a(6)),u=(a(15),a(5)),o=a(3),d=a(1),l=a.n(d),p=a(4),b=a.p+"static/media/delete_basket.1edb1a32.svg",m=a.p+"static/media/people.0c1eddfc.svg",f=a(0),j=function(t){var e=Object(n.useState)(!1),a=Object(s.a)(e,2),r=a[0],i=a[1],c=function(){i(!1)};return Object(f.jsxs)("div",{className:"box "+t.title.toLowerCase(),children:[t.fields?Object(f.jsxs)("div",{className:"box_add-modal"+(r?" open":""),children:[t.fields.map((function(t,e){return"select"===t.type?Object(f.jsx)("select",{name:t.name,children:t.options?t.options.map((function(t,e){return Object(f.jsx)("option",{value:t.value,children:t.text},e)})):""},e):Object(f.jsx)("input",{type:t.type,name:t.name,placeholder:t.placeholder},e)})),Object(f.jsx)("button",{onClick:function(e){var a,n={},r=e.target.parentNode.querySelectorAll("input"),i=Object(u.a)(r);try{for(i.s();!(a=i.n()).done;){var s=a.value;n[s.name]=s.value,s.value=""}}catch(b){i.e(b)}finally{i.f()}var o,d=e.target.parentNode.querySelectorAll("select"),l=Object(u.a)(d);try{for(l.s();!(o=l.n()).done;){var p=o.value;n[p.name]=p.selectedOptions[0].value}}catch(b){l.e(b)}finally{l.f()}t.okClickHandler&&n&&t.okClickHandler(n),c()},children:"OK"})]}):"",Object(f.jsxs)("div",{className:"box-header",children:[Object(f.jsx)("h2",{children:t.title}),t.buttonShouldBe?Object(f.jsx)("button",{onClick:function(){i(!0)},children:"+Add"}):""]}),t.buttonShouldBe?Object(f.jsx)("div",{className:"shadow-bg"+(r?" open":""),onClick:c}):"",t.children]})},x=r.a.createContext({}),h=function(){var t,e=Object(n.useContext)(x),a=function(){var t=Object(p.a)(l.a.mark((function t(a){var n,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.library.data.items.length?e.library.data.items.reduce((function(t,e){return e.id>t.id?e:t})).id:0,r=e.library,i=e.library.data.participants.map((function(t){return t.id})),r.data.items.push({id:n+1,name:a.title,sum:+a.sum,participantsId:i}),t.next=6,e.updateLibrary(Object(o.a)({},r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var t=Object(p.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.library).data.items=e.library.data.items.filter((function(t){return t.id!==a})),t.next=4,e.updateLibrary(Object(o.a)({},n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(p.a)(l.a.mark((function t(a,n){var r,i,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.library,(i=r.data.items.find((function(t){return t.id===a})))&&(c=r.data.items.indexOf(i),i.participantsId.includes(n)?(s=i.participantsId.indexOf(n),r.data.items[c].participantsId.splice(s,1)):r.data.items[c].participantsId.push(n)),t.next=5,e.updateLibrary(Object(o.a)({},r));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),c=[],s=Object(u.a)(e.library.data.participants);try{for(s.s();!(t=s.n()).done;){var d=t.value;c[d.id]=d.name}}catch(O){s.e(O)}finally{s.f()}var h=e.library.data.items.length?e.library.data.items.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{sum:+e.sum+ +t.sum})})).sum:0;return Object(f.jsxs)(j,{title:"Items",buttonShouldBe:!0,fields:[{type:"text",name:"title",placeholder:"Item Title"},{type:"number",name:"sum",placeholder:"Enter Sum"}],okClickHandler:a,children:[e.library.data.items.map((function(t){return Object(f.jsxs)("div",{className:"box_item-box",children:[Object(f.jsxs)("p",{children:[t.name," ---- ",t.sum]}),Object(f.jsx)("img",{src:m,alt:"people button",className:"item-box_button item-box_button_people"}),Object(f.jsx)("ul",{className:"item-box_participants-list",children:c.map((function(e,a){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"checkbox",checked:t.participantsId.includes(a),onChange:function(){return i(t.id,a)}}),Object(f.jsx)("span",{children:e})]})})}))}),Object(f.jsx)("img",{src:b,onClick:function(){return r(t.id)},alt:"delete button",className:"item-box_button item-box_button_delete"})]},t.id)})),Object(f.jsxs)("p",{children:["Total: ",h]})]})},O=function(){var t=Object(n.useContext)(x),e=function(){var e=Object(p.a)(l.a.mark((function e(a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.library).data.participants=t.library.data.participants.filter((function(t){return t.id!==a})),n.data.spending=t.library.data.spending.filter((function(t){return t.participantId!==a})),e.next=5,t.updateLibrary(Object(o.a)({},n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(p.a)(l.a.mark((function e(a){var n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.library.data.participants.length?t.library.data.participants.reduce((function(t,e){return e.id>t.id?e:t})).id:0,r=t.library,i={id:n+1,name:a.name},r.data.participants.push(i),e.next=6,t.updateLibrary(Object(o.a)({},r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(j,{title:"Participants",buttonShouldBe:!0,fields:[{type:"text",name:"name",placeholder:"Enter participant name"}],okClickHandler:a,children:[t.library.data.participants.map((function(t){return Object(f.jsxs)("div",{className:"box_item-box",children:[Object(f.jsx)("p",{children:t.name}),Object(f.jsx)("img",{onClick:function(){return e(t.id)},src:b,alt:"delete button",className:"item-box_button item-box_button_delete"})]},t.id)})),Object(f.jsxs)("p",{children:["Total: ",t.library.data.participants.length]})]})},v=function(){var t,e=Object(n.useContext)(x),a=function(){var t=Object(p.a)(l.a.mark((function t(a){var n,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.library,(r=n.results.find((function(t){return t.id===a})))&&(i=n.results.indexOf(r),n.results[i].approved=!n.results[i].approved),t.next=5,e.updateLibrary(Object(o.a)({},n));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=[],i=Object(u.a)(e.library.results);try{var c=function(){var a=t.value,n=e.library.data.participants.find((function(t){return t.id===a.fromId})),i=n?n.name:"Unknown",c=(n=e.library.data.participants.find((function(t){return t.id===a.toId})))?n.name:"Unknown";r.push({id:a.id,from:i,to:c,sum:a.sum,approved:a.approved})};for(i.s();!(t=i.n()).done;)c()}catch(s){i.e(s)}finally{i.f()}return Object(f.jsx)(j,{title:"Results",buttonShouldBe:!1,children:r.map((function(t){return Object(f.jsxs)("div",{className:t.approved?"box_item-box box_item-box_approved":"box_item-box",children:[Object(f.jsxs)("p",{children:["From ",t.from," to ",t.to," - ",t.sum]}),Object(f.jsx)("button",{onClick:function(){return a(t.id)},className:"item-box_button item-box_button_approve"})]},t.id)}))})},y=function(){var t=Object(n.useContext)(x),e=[{type:"select",name:"participant",options:t.library.data.participants.map((function(t){return{value:t.id,text:t.name}}))},{type:"number",name:"sum",placeholder:"Enter Sum"}],a=function(){var e=Object(p.a)(l.a.mark((function e(a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.library.data.spending.length?t.library.data.spending.reduce((function(t,e){return e.id>t.id?e:t})).id:0,(r=t.library).data.spending.push({id:n+1,participantId:+a.participant,amount:+a.sum}),e.next=5,t.updateLibrary(Object(o.a)({},r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(p.a)(l.a.mark((function e(a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.library).data.spending=t.library.data.spending.filter((function(t){return t.id!==a})),e.next=4,t.updateLibrary(Object(o.a)({},n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=t.library.data.spending.map((function(e){var a=t.library.data.participants.find((function(t){return t.id===e.participantId})),n=a&&a.name?a.name:"Unknown";return{id:e.id,participantName:n,amount:e.amount}})),c=t.library.data.spending.length?t.library.data.spending.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{amount:+e.amount+ +t.amount})})).amount:0;return Object(f.jsxs)(j,{title:"Spending",buttonShouldBe:!0,fields:e,okClickHandler:a,children:[i.map((function(t){return Object(f.jsxs)("div",{className:"box_item-box",children:[Object(f.jsxs)("p",{children:[t.participantName,": ",t.amount]}),Object(f.jsx)("img",{onClick:function(){return r(t.id)},src:b,alt:"delete button",className:"item-box_button item-box_button_delete"})]},t.id)})),Object(f.jsxs)("p",{children:["Total: ",c]})]})},g=function(){var t=Object(n.useState)(JSON.parse(localStorage.getItem("library")||"")),e=Object(s.a)(t,2),a=e[0],r=e[1],i=Object(n.useState)(!1),c=Object(s.a)(i,2),d=c[0],b=c[1],m=(Object(n.useContext)(x),function(){var t=Object(p.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(e),b(!1),t.next=4,localStorage.setItem("library",JSON.stringify(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),j=function(){var t=Object(p.a)(l.a.mark((function t(){var e,n,r,i,c,s,d,p,f,j,x,h,O;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.data.spending.length?a.data.spending.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{amount:+e.amount+ +t.amount})})).amount:0,n=a.data.items.length?a.data.items.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{sum:+e.sum+ +t.sum})})).sum:0,e===n){t.next=4;break}return t.abrupt("return");case 4:r=[],i=[],a.data.participants.forEach((function(t){var e,n=0,c=Object(u.a)(a.data.spending);try{for(c.s();!(e=c.n()).done;){var s=e.value;s.participantId===t.id&&(n+=s.amount)}}catch(m){c.e(m)}finally{c.f()}var o,d=0,l=Object(u.a)(a.data.items);try{for(l.s();!(o=l.n()).done;){var p=o.value;p.participantsId.length&&p.participantsId.includes(t.id)&&(d+=p.sum/p.participantsId.length)}}catch(m){l.e(m)}finally{l.f()}var b=d>n;b?r.push({id:t.id,name:t.name,debtor:b,balance:d-n}):i.push({id:t.id,name:t.name,debtor:b,balance:n-d})})),(c=a).results=[],s=0,d=i;case 10:if(!(s<d.length)){t.next=37;break}p=d[s],f=Object(u.a)(r),t.prev=13,f.s();case 15:if((j=f.n()).done){t.next=26;break}if(x=j.value,!(p.balance<=0)){t.next=19;break}return t.abrupt("break",26);case 19:if(!(x.balance<=0)){t.next=21;break}return t.abrupt("continue",24);case 21:h=0,p.balance>=x.balance?(h=x.balance,p.balance-=h):(h=p.balance,x.balance-=h),h>0&&(O=c.results.length?c.results.reduce((function(t,e){return e.id>t.id?e:t})).id:0,c.results.push({id:O,fromId:x.id,toId:p.id,sum:h,approved:!1}));case 24:t.next=15;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(13),f.e(t.t0);case 31:return t.prev=31,f.f(),t.finish(31);case 34:s++,t.next=10;break;case 37:return t.next=39,m(Object(o.a)({},c));case 39:b(!0);case 40:case"end":return t.stop()}}),t,null,[[13,28,31,34]])})));return function(){return t.apply(this,arguments)}}();return Object(f.jsx)("div",{children:Object(f.jsxs)(x.Provider,{value:{updateLibrary:m,library:a},children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(O,{}),Object(f.jsx)(y,{}),Object(f.jsx)(h,{}),d?Object(f.jsx)(v,{}):null]}),Object(f.jsx)("button",{onClick:j,children:"Calculate"})]})})},k={owner:"",date:"",name:"",id:1,data:{participants:[],spending:[],items:[]},results:[{id:1,fromId:1,toId:2,sum:1200,approved:!1}]};var w=function(){var t=Object(n.useState)(!1),e=Object(s.a)(t,2),a=e[0];return e[1],localStorage.getItem("library")||(localStorage.setItem("library",JSON.stringify(k)),console.log("put")),Object(f.jsxs)("div",{className:"app",children:[Object(f.jsx)("header",{className:"app-header",children:Object(f.jsx)("h1",{className:"app-name",children:"BillShare"})}),Object(f.jsx)("main",{className:"app-content"+(a?" menu_open":""),children:Object(f.jsx)(g,{})})]})},I=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,19)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;a(t),n(t),r(t),i(t),c(t)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(w,{})}),document.getElementById("root")),I()}},[[18,1,2]]]);
//# sourceMappingURL=main.44b20ad1.chunk.js.map