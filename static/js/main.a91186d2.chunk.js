(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{14:function(t,e,a){},15:function(t,e,a){},18:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),i=a(9),c=a.n(i),s=(a(14),a(6)),o=(a(15),a(3)),u=a(5),l=a(2),d=a.n(l),p=a(4),b=a.p+"static/media/delete_basket.1edb1a32.svg",m=a.p+"static/media/people.0c1eddfc.svg",j=r.a.createContext({}),f=a(0),h=function(t){var e=Object(n.useState)(!1),a=Object(s.a)(e,2),r=a[0],i=a[1],c=Object(n.useContext)(j),o=function(e){var a,n={},r=e.target.parentNode.querySelectorAll("input"),c=Object(u.a)(r);try{for(c.s();!(a=c.n()).done;){var s=a.value;n[s.name]=s.value,s.value=""}}catch(b){c.e(b)}finally{c.f()}var o,l=e.target.parentNode.querySelectorAll("select"),d=Object(u.a)(l);try{for(d.s();!(o=d.n()).done;){var p=o.value;n[p.name]=p.selectedOptions[0].value}}catch(b){d.e(b)}finally{d.f()}t.okClickHandler&&n&&t.okClickHandler(n),i(!1)};return Object(f.jsxs)("div",{className:"box "+t.title.toLowerCase(),children:[t.fields?Object(f.jsxs)("div",{className:"box_add-modal"+(r&&c.allowModalState?" open":""),children:[t.fields.map((function(t,e){return"select"===t.type?Object(f.jsx)("select",{name:t.name,children:t.options?t.options.map((function(t,e){return Object(f.jsx)("option",{value:t.value,children:t.text},e)})):""},e):Object(f.jsx)("input",{type:t.type,name:t.name,placeholder:t.placeholder},e)})),Object(f.jsx)("button",{onClick:function(t){o(t),c.denyModal()},children:"OK"})]}):"",Object(f.jsxs)("div",{className:"box-header",children:[Object(f.jsx)("h2",{children:t.title}),t.buttonShouldBe?Object(f.jsx)("button",{onClick:function(){i(!0),c.allowModal()},children:"+Add"}):""]}),t.children]})},x=function(){var t,e=Object(n.useContext)(j),a=function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.library.data.items.length?e.library.data.items.reduce((function(t,e){return e.id>t.id?e:t})).id:0,r=e.library,i=e.library.data.participants.map((function(t){return t.id})),r.data.items.push({id:n+1,name:a.title,sum:+(+a.sum).toFixed(2),participantsId:i}),t.next=6,e.updateLibrary(Object(o.a)({},r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.library).data.items=e.library.data.items.filter((function(t){return t.id!==a})),t.next=4,e.updateLibrary(Object(o.a)({},n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(p.a)(d.a.mark((function t(a,n){var r,i,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.library,(i=r.data.items.find((function(t){return t.id===a})))&&(c=r.data.items.indexOf(i),i.participantsId.includes(n)?(s=i.participantsId.indexOf(n),r.data.items[c].participantsId.splice(s,1)):r.data.items[c].participantsId.push(n)),t.next=5,e.updateLibrary(Object(o.a)({},r));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),c=[],s=Object(u.a)(e.library.data.participants);try{for(s.s();!(t=s.n()).done;){var l=t.value;c[l.id]=l.name}}catch(O){s.e(O)}finally{s.f()}var x=e.library.data.items.length?e.library.data.items.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{sum:+e.sum+ +t.sum})})).sum:0;return Object(f.jsxs)(h,{title:"Items",buttonShouldBe:!0,fields:[{type:"text",name:"title",placeholder:"Item Title"},{type:"number",name:"sum",placeholder:"Enter Sum"}],okClickHandler:a,children:[e.library.data.items.map((function(t){return Object(f.jsxs)("div",{className:"box_item-box",children:[Object(f.jsxs)("p",{children:[t.name," ---- ",t.sum]}),Object(f.jsx)("img",{src:m,alt:"people button",className:"item-box_button item-box_button_people"}),Object(f.jsx)("ul",{className:"item-box_participants-list",children:c.map((function(e,a){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"checkbox",checked:t.participantsId.includes(a),onChange:function(){return i(t.id,a)}}),Object(f.jsx)("span",{children:e})]})})}))}),Object(f.jsx)("img",{src:b,onClick:function(){return r(t.id)},alt:"delete button",className:"item-box_button item-box_button_delete"})]},t.id)})),Object(f.jsxs)("p",{children:["Total: ",x]})]})},O=function(){var t=Object(n.useContext)(j),e=function(){var e=Object(p.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.library).data.participants=t.library.data.participants.filter((function(t){return t.id!==a})),n.data.spending=t.library.data.spending.filter((function(t){return t.participantId!==a})),e.next=5,t.updateLibrary(Object(o.a)({},n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(p.a)(d.a.mark((function e(a){var n,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.library.data.participants.length?t.library.data.participants.reduce((function(t,e){return e.id>t.id?e:t})).id:0,r=t.library,i={id:n+1,name:a.name},r.data.participants.push(i),e.next=6,t.updateLibrary(Object(o.a)({},r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(h,{title:"Participants",buttonShouldBe:!0,fields:[{type:"text",name:"name",placeholder:"Enter participant name"}],okClickHandler:a,children:[t.library.data.participants.map((function(t){return Object(f.jsxs)("div",{className:"box_item-box",children:[Object(f.jsx)("p",{children:t.name}),Object(f.jsx)("img",{onClick:function(){return e(t.id)},src:b,alt:"delete button",className:"item-box_button item-box_button_delete"})]},t.id)})),Object(f.jsxs)("p",{children:["Total: ",t.library.data.participants.length]})]})},v=function(t){var e,a=Object(n.useContext)(j),r=function(){var e=Object(p.a)(d.a.mark((function e(n){var r,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.library,(i=r.results.find((function(t){return t.id===n})))&&(c=r.results.indexOf(i),r.results[c].approved=!r.results[c].approved),e.next=5,a.updateLibrary(Object(o.a)({},r));case 5:t.showResults();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=[],c=Object(u.a)(a.library.results);try{var s=function(){var t=e.value,n=a.library.data.participants.find((function(e){return e.id===t.fromId})),r=n?n.name:"Unknown",c=(n=a.library.data.participants.find((function(e){return e.id===t.toId})))?n.name:"Unknown";i.push({id:t.id,from:r,to:c,sum:t.sum,approved:t.approved})};for(c.s();!(e=c.n()).done;)s()}catch(l){c.e(l)}finally{c.f()}return Object(f.jsx)(h,{title:"Results",buttonShouldBe:!1,children:i.map((function(t,e){return Object(f.jsxs)("div",{className:t.approved?"box_item-box box_item-box_approved":"box_item-box",children:[Object(f.jsxs)("p",{children:["From ",t.from," to ",t.to," - ",t.sum]}),Object(f.jsx)("button",{onClick:function(){return r(t.id)},className:"item-box_button item-box_button_approve"})]},e)}))})},y=function(){var t=Object(n.useContext)(j),e=[{type:"select",name:"participant",options:t.library.data.participants.map((function(t){return{value:t.id,text:t.name}}))},{type:"number",name:"sum",placeholder:"Enter Sum"}],a=function(){var e=Object(p.a)(d.a.mark((function e(a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.library.data.spending.length?t.library.data.spending.reduce((function(t,e){return e.id>t.id?e:t})).id:0,(r=t.library).data.spending.push({id:n+1,participantId:+a.participant,amount:+(+a.sum).toFixed(2)}),e.next=5,t.updateLibrary(Object(o.a)({},r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(p.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.library).data.spending=t.library.data.spending.filter((function(t){return t.id!==a})),e.next=4,t.updateLibrary(Object(o.a)({},n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=t.library.data.spending.map((function(e){var a=t.library.data.participants.find((function(t){return t.id===e.participantId})),n=a&&a.name?a.name:"Unknown";return{id:e.id,participantName:n,amount:e.amount}})),c=t.library.data.spending.length?t.library.data.spending.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{amount:+e.amount+ +t.amount})})).amount:0;return Object(f.jsxs)(h,{title:"Spending",buttonShouldBe:!0,fields:e,okClickHandler:a,children:[i.map((function(t){return Object(f.jsxs)("div",{className:"box_item-box",children:[Object(f.jsxs)("p",{children:[t.participantName,": ",t.amount]}),Object(f.jsx)("img",{onClick:function(){return r(t.id)},src:b,alt:"delete button",className:"item-box_button item-box_button_delete"})]},t.id)})),Object(f.jsxs)("p",{children:["Total: ",c]})]})},g=function(t){var e=Object(n.useState)(JSON.parse(localStorage.getItem("library")||"")),a=Object(s.a)(e,2),r=a[0],i=a[1],c=[t.allowModal,t.denyModal,t.allowModalState],l=c[0],b=c[1],m=c[2],h=Object(n.useState)(!1),g=Object(s.a)(h,2),k=g[0],w=g[1],S=(Object(n.useContext)(j),function(){var t=Object(p.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(e),w(!1),t.next=4,localStorage.setItem("library",JSON.stringify(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),I=function(){var t=Object(p.a)(d.a.mark((function t(){var e,a,n,i,c,s,l,p,b,m,j,f,h,x,O,v;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Object(u.a)(r.data.items),t.prev=1,e.s();case 3:if((a=e.n()).done){t.next=10;break}if((n=a.value).participantsId.length){t.next=8;break}return alert("You don't have participants sharing \"".concat(n.name,'" item')),t.abrupt("return");case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),e.e(t.t0);case 15:return t.prev=15,e.f(),t.finish(15);case 18:if(i=r.data.spending.length?r.data.spending.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{amount:+e.amount+ +t.amount})})).amount:0,c=r.data.items.length?r.data.items.reduce((function(t,e){return Object(o.a)(Object(o.a)({},e),{},{sum:+e.sum+ +t.sum})})).sum:0,console.log(i),console.log(c),i===c){t.next=25;break}return alert("Spending and Items sums are not equal. Check it out."),t.abrupt("return");case 25:s=[],l=[],r.data.participants.forEach((function(t){var e,a=0,n=Object(u.a)(r.data.spending);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.participantId===t.id&&(a+=i.amount)}}catch(m){n.e(m)}finally{n.f()}var c,o=0,d=Object(u.a)(r.data.items);try{for(d.s();!(c=d.n()).done;){var p=c.value;p.participantsId.length&&p.participantsId.includes(t.id)&&(o+=+(p.sum/p.participantsId.length).toFixed(2))}}catch(m){d.e(m)}finally{d.f()}var b=o>a;b?s.push({id:t.id,name:t.name,debtor:b,balance:o-a}):l.push({id:t.id,name:t.name,debtor:b,balance:a-o})})),(p=r).results=[],b=0,m=l;case 31:if(!(b<m.length)){t.next=58;break}j=m[b],f=Object(u.a)(s),t.prev=34,f.s();case 36:if((h=f.n()).done){t.next=47;break}if(x=h.value,!(j.balance<=0)){t.next=40;break}return t.abrupt("break",47);case 40:if(!(x.balance<=0)){t.next=42;break}return t.abrupt("continue",45);case 42:O=0,j.balance>=x.balance?(O=x.balance,j.balance-=O):(O=j.balance,x.balance-=O),O>0&&(v=p.results.length?p.results.reduce((function(t,e){return e.id>t.id?e:t})).id:0,p.results.push({id:v+1,fromId:x.id,toId:j.id,sum:O.toFixed(2),approved:!1}));case 45:t.next=36;break;case 47:t.next=52;break;case 49:t.prev=49,t.t1=t.catch(34),f.e(t.t1);case 52:return t.prev=52,f.f(),t.finish(52);case 55:b++,t.next=31;break;case 58:return t.next=60,S(Object(o.a)({},p));case 60:w(!0);case 61:case"end":return t.stop()}}),t,null,[[1,12,15,18],[34,49,52,55]])})));return function(){return t.apply(this,arguments)}}();return Object(f.jsx)("div",{children:Object(f.jsxs)(j.Provider,{value:{updateLibrary:S,library:r,allowModal:l,denyModal:b,allowModalState:m},children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(O,{}),Object(f.jsx)(y,{}),Object(f.jsx)(x,{}),k?Object(f.jsx)(v,{showResults:function(){return w(!0)}}):null]}),Object(f.jsx)("button",{onClick:I,children:"Calculate"})]})})},k={owner:"",date:"",name:"",id:1,data:{participants:[],spending:[],items:[]},results:[{id:1,fromId:1,toId:2,sum:1200,approved:!1}]};var w=function(){var t=Object(n.useState)(!1),e=Object(s.a)(t,2),a=e[0],r=(e[1],Object(n.useState)(!1)),i=Object(s.a)(r,2),c=i[0],o=i[1],u=Object(n.useState)(!1),l=Object(s.a)(u,2),d=l[0],p=l[1],b=function(){o(!1)},m=function(){p(!1)};return localStorage.getItem("library")||(localStorage.setItem("library",JSON.stringify(k)),console.log("put")),Object(f.jsxs)("div",{className:"app",children:[Object(f.jsx)("header",{className:"app-header",children:Object(f.jsx)("h1",{className:"app-name",children:"BillShare"})}),Object(f.jsxs)("main",{className:"app-content"+(a?" menu_open":""),children:[Object(f.jsx)(g,{allowModalState:d,allowModal:function(){p(!0),o(!0)},denyModal:function(){m(),b()}}),Object(f.jsxs)("div",{className:"app-instruction",children:[Object(f.jsx)("p",{children:"It is an App helping you having a party to share your costs between participants honestly. Follow the next steps:"}),Object(f.jsx)("p",{children:"1. Add all party participants to Participants window"}),Object(f.jsx)("p",{children:"2. Add the information what costs has every participant to Spending window"}),Object(f.jsx)("p",{children:"3. Add the information about all things participants bought and what things what participants shared to Items window"}),Object(f.jsx)("p",{children:"4. Click Calculate!"}),Object(f.jsx)("p",{})]})]}),Object(f.jsx)("div",{className:"shadow-bg"+(c?" open":""),onClick:function(){m(),b()}})]})},S=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,19)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;a(t),n(t),r(t),i(t),c(t)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(w,{})}),document.getElementById("root")),S()}},[[18,1,2]]]);
//# sourceMappingURL=main.a91186d2.chunk.js.map